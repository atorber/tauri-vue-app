{"openapi":"3.1.0","info":{"title":"可转债历史数据 API","description":"\n    提供可转债历史数据的查询接口，包括：\n    \n    * 获取指定可转债的历史数据\n    * 获取指定日期的所有可转债数据\n    * 获取可转债最新数据\n    * 按条件搜索可转债数据\n    * 获取指定日期范围的数据\n    * 获取可转债基本信息\n    * 数据更新接口\n    ","version":"1.0.0"},"paths":{"/api/cb/history/{bond_id}":{"get":{"tags":["转债历史数据"],"summary":"Get Cb History By Id","description":"获取指定可转债的历史数据\n\n参数:\n- bond_id: 可转债代码\n- start_date: 开始日期（可选）\n- end_date: 结束日期（可选）\n- limit: 返回记录数量限制（最大1000）","operationId":"get_cb_history_by_id_api_cb_history__bond_id__get","parameters":[{"description":"可转债代码","required":true,"schema":{"type":"string","title":"Bond Id","description":"可转债代码"},"name":"bond_id","in":"path"},{"description":"开始日期（格式：YYYY-MM-DD，例如：2025-04-21）","required":false,"schema":{"type":"string","format":"date","title":"Start Date","description":"开始日期（格式：YYYY-MM-DD，例如：2025-04-21）"},"name":"start_date","in":"query"},{"description":"结束日期（格式：YYYY-MM-DD，例如：2025-04-21）","required":false,"schema":{"type":"string","format":"date","title":"End Date","description":"结束日期（格式：YYYY-MM-DD，例如：2025-04-21）"},"name":"end_date","in":"query"},{"description":"返回记录数量限制","required":false,"schema":{"type":"integer","maximum":2000.0,"minimum":1.0,"title":"Limit","description":"返回记录数量限制","default":2000},"name":"limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/latest/{bond_id}":{"get":{"tags":["转债历史数据"],"summary":"Get Latest Cb Data","description":"获取指定可转债的最新数据\n\n参数:\n- bond_id: 可转债代码","operationId":"get_latest_cb_data_api_cb_latest__bond_id__get","parameters":[{"description":"可转债代码","required":true,"schema":{"type":"string","title":"Bond Id","description":"可转债代码"},"name":"bond_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CBHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/history":{"get":{"tags":["转债历史数据"],"summary":"Search Cb History","description":"按条件搜索可转债历史数据\n\n参数:\n- min_price: 最低价格\n- max_price: 最高价格\n- min_premium_rt: 最低转股溢价率\n- max_premium_rt: 最高转股溢价率\n- min_ytm_rt: 最低到期收益率\n- max_ytm_rt: 最高到期收益率\n- date: 查询日期\n- limit: 返回记录数量限制（最大1000）","operationId":"search_cb_history_api_cb_history_get","parameters":[{"description":"最低价格","required":false,"schema":{"type":"number","title":"Min Price","description":"最低价格"},"name":"min_price","in":"query"},{"description":"最高价格","required":false,"schema":{"type":"number","title":"Max Price","description":"最高价格"},"name":"max_price","in":"query"},{"description":"最低转股溢价率","required":false,"schema":{"type":"number","title":"Min Premium Rt","description":"最低转股溢价率"},"name":"min_premium_rt","in":"query"},{"description":"最高转股溢价率","required":false,"schema":{"type":"number","title":"Max Premium Rt","description":"最高转股溢价率"},"name":"max_premium_rt","in":"query"},{"description":"最低到期收益率","required":false,"schema":{"type":"number","title":"Min Ytm Rt","description":"最低到期收益率"},"name":"min_ytm_rt","in":"query"},{"description":"最高到期收益率","required":false,"schema":{"type":"number","title":"Max Ytm Rt","description":"最高到期收益率"},"name":"max_ytm_rt","in":"query"},{"description":"查询日期（格式：YYYY-MM-DD，例如：2025-04-21）","required":false,"schema":{"type":"string","title":"Date","description":"查询日期（格式：YYYY-MM-DD，例如：2025-04-21）","default":"2025-04-21"},"name":"date","in":"query"},{"description":"当前页码","required":false,"schema":{"type":"integer","title":"Currentpage","description":"当前页码","default":1},"name":"currentPage","in":"query"},{"description":"每页数量","required":false,"schema":{"type":"integer","title":"Pagesize","description":"每页数量","default":1000},"name":"pageSize","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/date_range":{"get":{"tags":["转债历史数据"],"summary":"Get Cb Date Range","description":"获取指定日期范围内的可转债数据\n\n参数:\n- start_date: 开始日期\n- end_date: 结束日期\n- bond_id: 可转债代码（可选）\n- limit: 返回记录数量限制（最大1000）","operationId":"get_cb_date_range_api_cb_date_range_get","parameters":[{"description":"开始日期（格式：YYYY-MM-DD，例如：2025-04-21）","required":false,"schema":{"type":"string","format":"date","title":"Start Date","description":"开始日期（格式：YYYY-MM-DD，例如：2025-04-21）","default":"2025-04-21"},"name":"start_date","in":"query"},{"description":"结束日期（格式：YYYY-MM-DD，例如：2025-04-21）","required":false,"schema":{"type":"string","format":"date","title":"End Date","description":"结束日期（格式：YYYY-MM-DD，例如：2025-04-21）","default":"2025-04-21"},"name":"end_date","in":"query"},{"description":"可转债代码（可选）","required":false,"schema":{"type":"string","title":"Bond Id","description":"可转债代码（可选）"},"name":"bond_id","in":"query"},{"description":"当前页码","required":false,"schema":{"type":"integer","title":"Currentpage","description":"当前页码","default":1},"name":"currentPage","in":"query"},{"description":"每页数量","required":false,"schema":{"type":"integer","title":"Pagesize","description":"每页数量","default":1000},"name":"pageSize","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/stock":{"get":{"tags":["转债信息"],"summary":"Get All Cb Stock","description":"获取可转债基本信息列表，支持按名称和状态筛选\n\n参数:\n- bond_nm: 可转债名称（支持模糊搜索）\n- status: 可转债状态\n- limit: 返回记录数量限制（最大1000）\n- currentPage: 当前页码\n- pageSize: 每页数量\n- date: 交易日期","operationId":"get_all_cb_stock_api_cb_stock_get","parameters":[{"description":"可转债名称（支持模糊搜索）","required":false,"schema":{"type":"string","title":"Bond Nm","description":"可转债名称（支持模糊搜索）"},"name":"bond_nm","in":"query"},{"description":"可转债状态（已退市、未退市）","required":false,"schema":{"type":"string","title":"Status","description":"可转债状态（已退市、未退市）"},"name":"status","in":"query"},{"description":"当前页码","required":false,"schema":{"type":"integer","title":"Currentpage","description":"当前页码","default":1},"name":"currentPage","in":"query"},{"description":"每页数量","required":false,"schema":{"type":"integer","title":"Pagesize","description":"每页数量","default":1000},"name":"pageSize","in":"query"},{"description":"交易日期（格式：YYYY-MM-DD，例如：2025-04-21）","required":false,"schema":{"type":"string","title":"Date","description":"交易日期（格式：YYYY-MM-DD，例如：2025-04-21）"},"name":"date","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedStockResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/stock/{bond_id}":{"get":{"tags":["转债信息"],"summary":"Get Cb Stock By Id","description":"获取指定可转债的详细信息\n\n参数:\n- bond_id: 可转债代码","operationId":"get_cb_stock_by_id_api_cb_stock__bond_id__get","parameters":[{"description":"可转债代码","required":true,"schema":{"type":"string","title":"Bond Id","description":"可转债代码"},"name":"bond_id","in":"path"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CBStockInfo"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/double_low":{"get":{"tags":["转债历史数据"],"summary":"Get Cb Double Low","description":"获取指定日期的双低可转债数据\n\n参数:\n- date: 查询日期\n- prt_limit: 溢价率限制\n- dl_limit: 双低值限制","operationId":"get_cb_double_low_api_cb_double_low_get","parameters":[{"description":"查询日期（格式：YYYY-MM-DD，例如：2025-04-21）","required":false,"schema":{"type":"string","title":"Date","description":"查询日期（格式：YYYY-MM-DD，例如：2025-04-21）","default":"2025-04-21"},"name":"date","in":"query"},{"description":"溢价率限制（默认30）","required":false,"schema":{"type":"integer","title":"Prt Limit","description":"溢价率限制（默认30）","default":30},"name":"prt_limit","in":"query"},{"description":"双低值限制（默认15）","required":false,"schema":{"type":"integer","title":"Dl Limit","description":"双低值限制（默认15）","default":15},"name":"dl_limit","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedDoubleLowResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/update/stock_list":{"get":{"tags":["数据更新"],"summary":"Update Cb Stock List","description":"从excel中获取所有可转债代码，保存到数据库","operationId":"update_cb_stock_list_api_cb_update_stock_list_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/cb/update/stock_info":{"get":{"tags":["数据更新"],"summary":"Update Cb Stock Info","description":"从集思录获取所有可转债的基本信息，包括已经退市的转债\n通过only_unexpired参数控制是否只更新未退市的转债","operationId":"update_cb_stock_info_api_cb_update_stock_info_get","parameters":[{"description":"是否只更新未退市的转债","required":false,"schema":{"type":"boolean","title":"Only Unexpired","description":"是否只更新未退市的转债","default":false},"name":"only_unexpired","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/update/history_to_db":{"get":{"tags":["数据更新"],"summary":"Update Cb History To Db","description":"从集思录获取转债历史行情数据，包括已经退市的转债，信息包含：开盘价、收盘价...\n通过only_unexpired参数控制是否只处理未到期转债","operationId":"update_cb_history_to_db_api_cb_update_history_to_db_get","parameters":[{"description":"是否只更新未退市的转债","required":false,"schema":{"type":"boolean","title":"Only Unexpired","description":"是否只更新未退市的转债","default":false},"name":"only_unexpired","in":"query"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/cb/update/task_status":{"get":{"tags":["数据更新"],"summary":"Get Update Status","description":"获取当前更新任务状态","operationId":"get_update_status_api_cb_update_task_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"CBHistoryResponse":{"properties":{"id":{"type":"string","title":"Id"},"bond_id":{"type":"string","title":"Bond Id"},"last_chg_dt":{"type":"string","format":"date","title":"Last Chg Dt"},"ytm_rt":{"type":"number","title":"Ytm Rt"},"premium_rt":{"type":"number","title":"Premium Rt"},"convert_value":{"type":"number","title":"Convert Value"},"price":{"type":"number","title":"Price"},"volume":{"type":"number","title":"Volume"},"stock_volume":{"type":"number","title":"Stock Volume"},"sprice":{"type":"number","title":"Sprice"},"curr_iss_amt":{"type":"number","title":"Curr Iss Amt"},"bond_convPrice":{"type":"number","title":"Bond Convprice"},"turnover_rt":{"type":"number","title":"Turnover Rt"}},"type":"object","required":["id","bond_id","last_chg_dt","ytm_rt","premium_rt","convert_value","price","volume","stock_volume","sprice","curr_iss_amt","bond_convPrice","turnover_rt"],"title":"CBHistoryResponse"},"CBHistoryResponseDoubleLow":{"properties":{"id":{"type":"string","title":"Id"},"bond_id":{"type":"string","title":"Bond Id"},"last_chg_dt":{"type":"string","format":"date","title":"Last Chg Dt"},"ytm_rt":{"type":"number","title":"Ytm Rt"},"premium_rt":{"type":"number","title":"Premium Rt"},"convert_value":{"type":"number","title":"Convert Value"},"price":{"type":"number","title":"Price"},"volume":{"type":"number","title":"Volume"},"stock_volume":{"type":"number","title":"Stock Volume"},"sprice":{"type":"number","title":"Sprice"},"curr_iss_amt":{"type":"number","title":"Curr Iss Amt"},"bond_convPrice":{"type":"number","title":"Bond Convprice"},"turnover_rt":{"type":"number","title":"Turnover Rt"},"double_low":{"type":"number","title":"Double Low"},"bond_nm":{"type":"string","title":"Bond Nm"}},"type":"object","required":["id","bond_id","last_chg_dt","ytm_rt","premium_rt","convert_value","price","volume","stock_volume","sprice","curr_iss_amt","bond_convPrice","turnover_rt","double_low","bond_nm"],"title":"CBHistoryResponseDoubleLow"},"CBStockInfo":{"properties":{"bond_id":{"type":"string","title":"Bond Id"},"bond_nm":{"type":"string","title":"Bond Nm"},"status":{"type":"string","title":"Status"},"list_dt":{"type":"string","title":"List Dt"},"maturity_dt":{"type":"string","title":"Maturity Dt"},"last_dt":{"type":"string","title":"Last Dt"},"notes":{"type":"string","title":"Notes"},"force_redeem_dt":{"type":"string","title":"Force Redeem Dt","default":"-"},"force_redeem_price":{"type":"number","title":"Force Redeem Price","description":"强制赎回价格，无效值将被转换为 None"},"convert_price_adjustments":{"items":{"type":"object"},"type":"array","title":"Convert Price Adjustments"}},"type":"object","required":["bond_id","bond_nm","status"],"title":"CBStockInfo"},"CBStockList":{"properties":{"bond_id":{"type":"string","title":"Bond Id"},"bond_nm":{"type":"string","title":"Bond Nm"},"status":{"type":"string","title":"Status"},"list_dt":{"type":"string","title":"List Dt"},"maturity_dt":{"type":"string","title":"Maturity Dt"},"last_dt":{"type":"string","title":"Last Dt"},"notes":{"type":"string","title":"Notes"},"force_redeem_dt":{"type":"string","title":"Force Redeem Dt","default":"-"},"force_redeem_price":{"type":"number","title":"Force Redeem Price","description":"强制赎回价格，无效值将被转换为 None"},"convert_price_adjustments":{"items":{"type":"object"},"type":"array","title":"Convert Price Adjustments"}},"type":"object","required":["bond_id","bond_nm","status"],"title":"CBStockList"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PaginatedDoubleLowResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/CBHistoryResponseDoubleLow"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"success":{"type":"boolean","title":"Success"},"pageSize":{"type":"integer","title":"Pagesize"},"currentPage":{"type":"integer","title":"Currentpage"}},"type":"object","required":["data","total","success","pageSize","currentPage"],"title":"PaginatedDoubleLowResponse"},"PaginatedResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/CBHistoryResponse"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"success":{"type":"boolean","title":"Success"},"pageSize":{"type":"integer","title":"Pagesize"},"currentPage":{"type":"integer","title":"Currentpage"}},"type":"object","required":["data","total","success","pageSize","currentPage"],"title":"PaginatedResponse"},"PaginatedStockResponse":{"properties":{"data":{"items":{"$ref":"#/components/schemas/CBStockList"},"type":"array","title":"Data"},"total":{"type":"integer","title":"Total"},"success":{"type":"boolean","title":"Success"},"pageSize":{"type":"integer","title":"Pagesize"},"currentPage":{"type":"integer","title":"Currentpage"}},"type":"object","required":["data","total","success","pageSize","currentPage"],"title":"PaginatedStockResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}